# Обмен заказами 1С с сайтом.

* Сдесь находятся ссылки на формат http://v8.1c.ru/edi/edi_stnd/131/
* Сам формат http://v8.1c.ru/edi/edi_stnd/131/from.xml 
* То, что сейчас отдаётся можно поглядеть на странице `/cmlexchange/orders`, для вывода используется функция `dsm()` из модуля `devel`

## За реализацию отвечает `\Drupal::service('cmlexchange.orders')`
https://git.synapse-studio.ru/d-org/cmlexchange/blob/master/src/Service/Orders.php
* Написать свой query для заказов можно используя хук `HOOK_cmlexchange_orders_query_alter(&$orders)`
* Изменить xml, чтобы добавить дополнительную инфу в заказы можно сп мощью хука `HOOK_cmlexchange_orders_xml_alter(&$xml, $orders)`

## TODO:
сейчас точно ***НЕ*** реализован обмен информацией о свойствах заказа:
```xml
<?xml version="1.0"?>
<ЗначенияРеквизитов>
  <ЗначениеРеквизита>
    <Наименование>Метод оплаты</Наименование>
    <Значение>Наличный расчет</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Заказ оплачен</Наименование>
    <Значение>false</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Доставка разрешена</Наименование>
    <Значение>false</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Отменен</Наименование>
    <Значение>false</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Финальный статус</Наименование>
    <Значение>false</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Статус заказа</Наименование>
    <Значение>[N] Принят</Значение>
  </ЗначениеРеквизита>
  <ЗначениеРеквизита>
    <Наименование>Дата изменения статуса</Наименование>
    <Значение>2007-10-30 15:19:27</Значение>
  </ЗначениеРеквизита>
</ЗначенияРеквизитов>
```
